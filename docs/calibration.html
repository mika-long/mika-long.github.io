<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Sheng Long" />


<title>Calibration</title>

<script src="site_libs/header-attrs-2.23/header-attrs.js"></script>
<link href="site_libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="site_libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="site_libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="site_libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>





</head>

<body>




<h1 class="title toc-ignore">Calibration</h1>
<h4 class="author">Sheng Long</h4>



<p>Under Jacob Abernathy’s notes, I realized that perhaps searching for “calibrated forecasting” will turn out more fruitful results.</p>
<div id="foster-and-vohar-1997" class="section level1">
<h1>Foster and Vohar 1997</h1>
<p><span class="citation">(<label for="tufte-mn-1" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-1" class="margin-toggle">Dean P. Foster and Vohra 1997<span class="marginnote">Foster, Dean P, and Rakesh V Vohra. 1997. <span>“Calibrated <span>Learning</span> and <span>Correlated Equilibrium</span>.”</span> <em>Games and Economic Behavior</em> 21 (1): 40–55. <a href="https://doi.org/10.1006/game.1997.0595">https://doi.org/10.1006/game.1997.0595</a>.</span>)</span> is the first paper that talks about this idea. They referred to Dawid 1982 for this <em>intuitive definition</em><label for="tufte-sn-1" class="margin-toggle sidenote-number">1</label><input type="checkbox" id="tufte-sn-1" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">1</span> that I didn’t find intuitive at all</span> but it’s worth following up for details.</p>
<p>Formally, suppose player 1 is using a forecasting scheme<label for="tufte-sn-2" class="margin-toggle sidenote-number">2</label><input type="checkbox" id="tufte-sn-2" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">2</span> or prediction scheme, whatever suits your taste</span> <span class="math inline">\(f\)</span>. The output of <span class="math inline">\(f\)</span> in round <span class="math inline">\(t\)</span> of play is an <span class="math inline">\(n\)</span>-tuple: <span class="math inline">\(f(t) = (p_1(t), ..., p_n(t))\)</span> where <span class="math inline">\(p_j(t), j \in [n]\)</span> is the forecasted probability that player 2 will play strategy <span class="math inline">\(j \in S(2)\)</span><label for="tufte-sn-3" class="margin-toggle sidenote-number">3</label><input type="checkbox" id="tufte-sn-3" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">3</span> where <span class="math inline">\(S(2)\)</span> is the set of pure strategies of player 2</span> at time <span class="math inline">\(t\)</span>.</p>
<p>Let <span class="math inline">\(\chi(j, t) = 1\)</span> if player 2 players their <span class="math inline">\(j\)</span>-th strategy in round <span class="math inline">\(t\)</span> and equal 0 otherwise.</p>
<p>Denote by <span class="math inline">\(N(p,t)\)</span> the number of rounds up to the <span class="math inline">\(t\)</span>-th round that <span class="math inline">\(f\)</span> generated a vector of forecasts equal to <span class="math inline">\(p\)</span><label for="tufte-sn-4" class="margin-toggle sidenote-number">4</label><input type="checkbox" id="tufte-sn-4" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">4</span> I assume that <span class="math inline">\(p\)</span> here is a vector</span>. Let <span class="math inline">\(\rho(p, j, t)\)</span> be the fraction of these rounds for which player 2 plays <span class="math inline">\(j\)</span>, i.e.,
<span class="math display">\[
\rho(p, j, t) = \begin{cases}
0 &amp; \text{ if } N(p, t) = 0\\
\sum_{s=1}^t \frac{\mathbf{1}_{f(s) = p} \chi(j, s)}{N(p, t)} &amp; \text{otherwise}
\end{cases}
\]</span></p>
<p>The forecast <span class="math inline">\(f\)</span> is said to be <em>calibrated with respect to the sequences of plays made by player 2</em> if for all <span class="math inline">\(j\in S(2)\)</span>,
<span class="math display">\[
\lim_{t \to \infty} \sum_p |\rho(p, j, t) - p_j|  \frac{N(p, t)}{t} = 0
\]</span></p>
<p>“Roughly, calibration says that the empirical frequencies <em>conditioned on the assessments</em> converge to the assessments”.</p>
<hr />
</div>
<div id="note-from-robert-kleinberg" class="section level1">
<h1>Note from Robert Kleinberg</h1>
<p>In his <a href="https://www.cs.cornell.edu/courses/cs683/2007sp/lecnotes/week5.pdf">notes</a>, Robert Kleinberg defines this to be “FV-calibrated”<label for="tufte-sn-5" class="margin-toggle sidenote-number">5</label><input type="checkbox" id="tufte-sn-5" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">5</span> where “FV” stands for “Foster-Vohra”</span>.</p>
<p>A forecasts is <em>calibrated</em> if for every distribution <span class="math inline">\(p\)</span>, if one restricts attention to the subsequence of outcomes observed when the forecast is near <span class="math inline">\(p\)</span>, the distribution of outcomes actually observed is also near <span class="math inline">\(p\)</span>.</p>
<p>Let <span class="math inline">\(A\)</span> be a finite set, <span class="math inline">\(p_1, p_2, ... \in \Delta(A)\)</span> a sequence of probability distributions<label for="tufte-sn-6" class="margin-toggle sidenote-number">6</label><input type="checkbox" id="tufte-sn-6" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">6</span> i.e., “forecasts”</span> and <span class="math inline">\(a_1, a_2, ... \in A\)</span> a sequence of elements of <span class="math inline">\(A\)</span>.</p>
<p>For <span class="math inline">\(p \in \Delta[A]\)</span> we define
<span class="math display">\[
\begin{align}
\tau_T (p) &amp;= \{t: 1 \leq t \leq T \text{ and } p_t = p\}\\
N_T (p) &amp;= |\tau_T(p)| \\
\rho_T(p) &amp;= \frac{1}{N_T(p)} \sum_{t \in \tau_T} \delta[a_t]
\end{align}
\]</span></p>
<p>where <span class="math inline">\(\delta[a] \in \Delta(A)\)</span> denotes the probability distribution which assigns probability 1 to <span class="math inline">\(a\)</span> and probability 0 to all other elements.</p>
<p>One drawback of this definition is that it is very unstable under perturbations of the forecasts. The reason is that <span class="math inline">\(\rho_T(p)\)</span> is defined to be the distribution of outcomes observed when the forecast <em>is exactly equal to</em> <span class="math inline">\(p\)</span>.</p>
<p>Therefore, they offer their own version of definition for calibration:
…</p>
<hr />
</div>
<div id="foster-and-vohra-1998" class="section level1">
<h1>Foster and Vohra 1998</h1>
<p><span class="citation">(<label for="tufte-mn-2" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-2" class="margin-toggle">Dean P. Foster and Vohra 1998<span class="marginnote">Foster, Dean P., and Rakesh V. Vohra. 1998. <span>“Asymptotic <span>Calibration</span>.”</span> <em>Biometrika</em> 85 (2): 379–90. <a href="https://www.jstor.org/stable/2337364">https://www.jstor.org/stable/2337364</a>.</span>)</span> is the follow-up paper to their original paper. To conclude: this paper has better notation, and probably Kleinberg also follows up on this paper instead of the previous one published in 1997…</p>
<ul>
<li>Forecasting method <span class="math inline">\(F\)</span>: mapping from any binary sequence to a unique number in the interval <span class="math inline">\([0, 1]\)</span>
<ul>
<li>randomized forecasting method: mapping from binary sequence to probability distribution over <span class="math inline">\([0, 1]\)</span></li>
</ul></li>
<li>state of nature: <span class="math inline">\(X_t= 1\)</span> if wet and <span class="math inline">\(X_t = 0\)</span> if dry<label for="tufte-sn-7" class="margin-toggle sidenote-number">7</label><input type="checkbox" id="tufte-sn-7" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">7</span> yes we are predicting the weather here</span></li>
<li><span class="math inline">\(X^T\)</span>: state of nature up to and include period <span class="math inline">\(T\)</span></li>
</ul>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
